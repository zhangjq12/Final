<link href="/public/css/estimateTable.css" rel="stylesheet">
<div class="container-fluid estimatePage" data-name="{{voe}}" style="padding-top: 50px;">
    {{#each data}}
    <div class="row">
        <div class="col-12 text-center">
            <h2>Show Name - <span id="showName">{{showName}}</span></h2>
            <p>BoothNum - <span id="boothId">{{boothNum}}</span></p>
            <p><span>Start Date - </span>{{date.start}}</p>
            <p><span id="endDate+{{date.end}}">End Date - </span>{{date.end}}</p>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-6 col-xl-3 showDetails">
            <h6 class="mb-3">Categories</h6>
            <p>Carpet:&nbsp;{{category.carpet.name}} - 
                {{#if category.carpet.otherColor}}
                {{category.carpet.otherColor}}
                {{else}}
                <span class="d-inline-block colorTooltip" tabindex="0" data-toggle="tooltip" title="{{category.carpet.color}}"><a target="_blank" href="/public/image/CarpetColor/{{category.carpet.color}}.jpg"><img src="/public/image/CarpetColor/{{category.carpet.color}}.jpg" width="40px" height="40px"></a></span>
                {{/if}}
            </p>
            <p>Wall Panel:&nbsp;
                {{category.panel.name}} - {{category.panel.details}}
            </p>
            {{#each category.lighting.details}}
                <p>Lighting:&nbsp;
                <span class="d-inline-block lightingTooltip" tabindex="0" data-toggle="tooltip" title="{{name}}"><a target="_blank" href="/public/image/Lighting/{{name}}.jpg"><img src="/public/image/Lighting/{{name}}.jpg" width="40px" height="40px"></a></span> - {{num}}&nbsp;{{unit}}
                </p>
            {{/each}}
            {{#if category.lighting.other.name}}
                <p>Lighting:&nbsp;
                {{category.lighting.other.name}} - {{category.lighting.other.num}}&nbsp;{{category.lighting.other.unit}}
                </p>
            {{/if}}
            {{#if category.electricity.nonupload}}
            {{else}}
            <p>Electricity:&nbsp;<a target="_blank" href="/public/image/exhibitor/electricity/{{category.electricity.filename}}"><img src="/public/image/exhibitor/electricity/{{category.electricity.filename}}" width="100px" height="70px"></a></p>
            {{/if}}
            {{#each category.graphic.details}}
                <p>Graphic:&nbsp;
                {{name}} - {{num}}&nbsp;{{unit}}
                </p>
            {{/each}}
            {{#if category.graphic.other.name}}
                <p>Graphic:&nbsp;
                {{category.graphic.other.name}} - {{category.graphic.other.num}}&nbsp;{{category.graphic.other.unit}}
                </p>
            {{/if}}
            {{#each category.display.details}}
                <p>Display:&nbsp;
                {{name}} - {{num}}&nbsp;{{unit}}
                </p>
            {{/each}}
            {{#if category.display.other.name}}
                <p>Display:&nbsp;
                {{category.display.other.name}} - {{category.display.other.num}}&nbsp;{{category.display.other.unit}}
                </p>
            {{/if}}
            {{#each category.furniture.details}}
                <p>Furniture:&nbsp;
                {{category}} - <span class="d-inline-block furnitureTooltip" tabindex="0" data-toggle="tooltip" title="{{name}}"><a target="_blank" href="/public/image/Furniture/{{name}}.jpg"><img src="/public/image/Furniture/{{name}}.jpg" width="40px" height="40px"></a></span> - {{num}}&nbsp;{{unit}}
                </p>
            {{/each}}
            {{#if category.furniture.other.name}}
                <p>Furniture:&nbsp;
                {{category.furniture.other.name}} - {{category.furniture.other.num}}&nbsp;{{category.furniture.other.unit}}
                </p>
            {{/if}}
            {{#each category.accessories.details}}
                <p>Accessories:&nbsp;
                {{name}}
                </p>
            {{/each}}
            {{#if category.accessories.other.name}}
                <p>Accessories:&nbsp;
                {{category.accessories.other.name}}
                </p>
            {{/if}}
            {{#each category.showsite.details}}
                <p>Show Site:&nbsp;
                {{name}}
                </p>
            {{/each}}
            {{#if category.showsite.other.name}}
                <p>Show Site:&nbsp;
                {{category.showsite.other.name}}
                </p>
            {{/if}}
            <h6 class="mb-3">Description</h6>
            {{#each details.designFile.filename}}
            <p><a target="_blank" href="/public/image/exhibitor/designPlan/{{name}}">{{fileName}}</a></p>
            {{/each}}
            <div class="showDetails">{{details.additionalInfo.details}}</div>
        </div>
        <div class="col-xl-9 bg-white">
            <form id="estimateForm">
            <table id="estimateTable" class="table table-fixed table-bordered" cellspacing="0">
                <thead>
                    <tr>
                        <!--<th scope="col"></th>-->
                        <th scope="col">#</th>
                        <th style="width: 16%">Category</th>
                        <th style="width: 9%">No.</th>
                        <th style="width: 34%">Product name</th>
                        <th style="width: 8%">Unit</th>
                        <th style="width: 11%">Price</th>
                        <th style="width: 11%">Quantity</th>
                        <th style="width: 11%">SubTotal</th>
                    </tr>
                </thead>
                <tbody>
                    <!--{{#each ../estimateTable}}
                    <tr>
                        <td scope="row" style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}-->
                    <tr>
                        <!--<th scope="col"></th>-->
                        <th scope="col">#</th>
                        <th style="width: 16%"></th>
                        <th style="width: 9%"></th>
                        <th style="width: 34%"></th>
                        <th style="width: 8%"></th>
                        <th style="width: 11%"></th>
                        <th style="width: 11%"></th>
                        <th style="width: 11%"></th>
                    </tr>
                    <tr>
                        <!--<th scope="row">#</th>-->
                        <td colspan="8" class="headCollapse" style="width:100%;">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="flooringCollapse" href="#flooringCollapse">Flooring</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Flooring}}
                    {{#each ../estimateTable.Flooring}}
                    <tr class="collapse" id="flooringCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                    <tr>
                        <td colspan="8" class="headCollapse">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="riggingCollapse" href="#riggingCollapse">Rigging</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Rigging}}
                    {{#each ../estimateTable.Rigging}}
                    <tr class="collapse" id="riggingCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                    <tr>
                        <td colspan="8" class="headCollapse">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="mainStructuresCollapse" href="#mainStructuresCollapse">Main Structures</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Main_Structures}}
                    {{#each ../estimateTable.Main_Structures}}
                    <tr class="collapse" id="mainStructuresCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                    <tr>
                        <td colspan="8" class="headCollapse">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="electricalCollapse" href="#electricalCollapse">Electrical</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Electrical}}
                    {{#each ../estimateTable.Electrical}}
                    <tr class="collapse" id="electricalCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                    <tr>
                        <td colspan="8" class="headCollapse">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="electricityCollapse" href="#electricityCollapse">Electricity</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Electricity}}
                    {{#each ../estimateTable.Electricity}}
                    <tr class="collapse" id="electricityCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                    <tr>
                        <td colspan="8" class="headCollapse">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="graphicCollapse" href="#graphicCollapse">Graphic</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Graphic}}
                    {{#each ../estimateTable.Graphic}}
                    <tr class="collapse" id="graphicCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                    <tr>
                        <td colspan="8" class="headCollapse">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="displayCollapse" href="#displayCollapse">Display</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Display}}
                    {{#each ../estimateTable.Display}}
                    <tr class="collapse" id="displayCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                    <tr>
                        <td colspan="8" class="headCollapse">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="furnitureCollapse" href="#furnitureCollapse">Furniture</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Furniture}}
                    {{#each ../estimateTable.Furniture}}
                    <tr class="collapse" id="furnitureCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                    <tr>
                        <td colspan="8" class="headCollapse">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="shippingCollapse" href="#shippingCollapse">Shipping</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Shipping}}
                    {{#each ../estimateTable.Shipping}}
                    <tr class="collapse" id="shippingCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                    <tr>
                        <td colspan="8" class="headCollapse">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="accessoriesCollapse" href="#accessoriesCollapse">Accessories</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Accessories}}
                    {{#each ../estimateTable.Accessories}}
                    <tr class="collapse" id="accessoriesCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                    <tr>
                        <td colspan="8" class="headCollapse">
                            <div class="container-fluid">
                                <a class="btn btn-link" style="width: 100%;" data-toggle="collapse" aria-expanded="false" aria-controls="plantsCollapse" href="#plantsCollapse">Plants</a>
                            </div>
                        </td>
                    </tr>
                    {{#if ../estimateTable.Plants}}
                    {{#each ../estimateTable.Plants}}
                    <tr class="collapse" id="plantsCollapse">
                        <th scope="row"></th>
                        <td style="width: 16%">{{Category}}</td>
                        <td style="width: 9%">{{Product_No}}</td>
                        <td style="width: 34%">{{Product_name}}</td>
                        <td style="width: 8%">{{Unit}}</td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm priceInput" type="text" value="{{Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <input class="form-control form-control-sm numInput" type="text" value="{{Quantity}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="subTotal">{{Total}}</span>
                        </td>
                    </tr>
                    {{/each}}
                    {{/if}}
                </tbody>
                <tfoot>
                    <tr>
                        <td style="width: 11%">
                            Extra Items Upload:
                        </td>
                        <td colspan="3" style="width: 88%">
                            <div id="extraDiv">
                                <div class="file-loading">
                                    <input id="extraUpload" type="file" multiple data-msg-placeholder="Upload Design Plan...">
                                    <!--<label for="designUpload" class="custom-file-label">Upload Design Plan:</label>-->
                                </div>
                            </div>
                            <div id="extraFiles">
                                {{#each ../estimateTable/extra/FileName}}
                                <span><a target="_blank" href="/public/image/Estimate/extra/{{name}}">{{fileName}}</a></span>
                                {{/each}}
                            </div>
                        </td>
                        <td colspan="2" style="width: 22%">
                            <label for="extraPriceInput">Total:</label>
                            <input id="extraPriceInput" class="form-control form-control-sm extraInput" type="text" value="{{../estimateTable/extra/Price}}" onKeyPress="if((event.keyCode<48 || event.keyCode>57) && event.keyCode!=46 || /\.\d\d$/.test(value))event.returnValue=false" />
                        </td>
                        <td style="width: 11%">
                            <span class="extraTotal">{{../estimateTable/extra/Total}}</span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="5" style="width: 88%;">
                            
                        </td>
                        <td style="width: 11%;">Total:</td>
                        <td style="width: 11%;">
                            <input type="hidden" id="author" value="{{author}}"></input>
                            <span class="totalPriceSpan">{{../total}}</span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="6">
                            
                        </td>
                        <td>
                            <button id="estimateSubmit" type="submit" class="btn btn-light">Submit</button>
                        </td>
                    </tr>
                </tfoot>
            </table>
            </form>
        </div>
    </div>
    {{/each}}
</div>

<div class="modal fade" id="estimateDia" tabindex="-1" role="dialog" aria-labelledby="estimateDiaTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header" id="estimateDiaHeader">
                <h5 class="modal-title" id="estimateDiaTitle">Modify Tab</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="estimateDiaBody">
                Do you want to continue?
            </div>
            <div class="modal-footer" id="estimateDiaFooter">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" id="noEstimate" >No</button>
                <button type="button" class="btn btn-primary" id="yesEstimate" >Yes</button>
            </div>
        </div>
    </div>
</div> 

<!--<script type="text/javascript" src="/public/js/datatables.min.js"></script>-->
<script>
    var extraFile;
    var $table = $('.table-fixed'),
    $bodyCells = $table.find('tbody tr:first').children(),
    colWidth;

    // Adjust the width of thead cells when window resizes
    $(window).resize(function() {
        // Get the tbody columns width array
        colWidth = $bodyCells.map(function() {
            return $(this).width();
        }).get();
        
        // Set the width of thead columns
        $table.find('thead tr').children().each(function(i, v) {
            $(v).width(colWidth[i]);
        });
    }).resize();
    (function() {
        'use strict';
        window.addEventListener('load', function() {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
                if (form.checkValidity() === false) {
                    event.preventDefault();
                    //$("#tabSubmit").prop('disabled', true);
                    event.stopPropagation();
                }
                else {
                    event.preventDefault();
                    $("#estimateDia").modal('show');
                    $(this).find(':button[type=submit]').html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Submitting...');
                    $(this).find(':button[type=submit]').prop('disabled', true);
                }
                form.classList.add('was-validated');
            }, false);
            });
        }, false);
    })();
    $("#estimateForm").submit(function(e) {
        e.preventDefault();
        $("#estimateDia").modal("show");
        $('#estimateSubmit').html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Submitting...');
        $('#estimateSubmit').prop('disabled', true);
    })
    $("#extraUpload").change(function(e) {
        var file = this.files;
        extraFile = file;
        if(this.files) {
            $("#extraPriceInput").prop("required", true);
        }
        else {
            $("#extraPriceInput").removeAttr("required");
        }
    });
    $(document).ready(function() {
        $("#estimateTable").find("tbody").css("color", "gray");
        $("#extraPriceInput").parent().parent().css("color", "gray");
        //console.log($(".estimatePage").attr("data-name"));
        if($(".estimatePage").attr("data-name") == "exhibitor") {
            //console.log($(".estimatePage").attr("data-name"));
            $("#extraDiv").attr("style", "display: none;");
            //console.log($("#extraDiv").attr("style"));
            $("#extraFiles").attr("style", "display: block;");
            $("table").find(".collapse").addClass("show");
            $("input").prop("disabled", true);
            $("button").parent().parent().hide();
        }
        else
        if($(".estimatePage").attr("data-name") == "vendor") {
            //console.log($(".container-fluid").attr("data-name"));
            $("#extraDiv").attr("style", "display: block;");
            $("#extraFiles").attr("style", "display: none;");
        }
        $(".colorTooltip").each(function() {
            var str1 = $(this).attr("title");
            str1 = str1.replace("_", " ");
            $(this).attr("title", str1);
        });
        $(".lightingTooltip").each(function() {
            var str1 = $(this).find("a").attr("href");
            str1 = str1.toString().replace(/\s+/g, "_");
            $(this).find("a").attr("href", str1);
            var str2 = $(this).find("img").attr("src");
            str2 = str2.replace(/\s+/g, "_");
            $(this).find("img").attr("src", str1);
        });
        $(".furnitureTooltip").each(function() {
            var str1 = $(this).find("a").attr("href");
            str1 = str1.replace(/\s+/g, "_");
            $(this).find("a").attr("href", str1);
            var str2 = $(this).find("img").attr("src");
            str2 = str2.replace(/\s+/g, "_");
            $(this).find("img").attr("src", str1);
        });
        $(".showDetails").each(function() {
            var data = $(this).html();
            data = data.replace(/&lt;/g, "<");
            data = data.replace(/&gt;/g, ">");
            data = data.replace(/&#x3D;/g, "=");
            data = data.replace("<script>", "&lt;script&gt;");
            data = data.replace("<style>", "&lt;style&gt;");
            data = data.replace(/<img src/g, "<img style='max-width:100%;' src");
            data = data.replace("&amp;nbsp;", " ");
            $(this).html(data);
        });
         $("#extraUpload").fileinput({
            uploadUrl: "#",
            theme: "fas",
            showUpload: false,
            showRemove : true,
            dropZoneEnabled: false,
            maxFileCount: 10,
            layoutTemplates: {
                actionUpload: ''
            }
        });
        $(".numInput").each(function() {
            $(this).bind('input propertychange', function() {
                var eaprice = parseFloat($(this).parent().parent().find(".priceInput").val() == "" ? 0.00 : $(this).parent().parent().find(".priceInput").val());
                var price = eaprice * parseFloat(this.value == "" ? 0.00 : this.value);
                price = price.toFixed(2);
                $(this).parent().parent().find(".subTotal").html("$" + price.toString());
                var sum = 0;
                $(this).parent().parent().parent().parent().find(".subTotal").each(function() {
                    sum += parseFloat($(this).html().split("$")[1]);
                });
                sum += parseFloat($(this).parent().parent().parent().parent().find(".extraInput").val() == "" ? 0.00 : $(this).parent().parent().parent().parent().find(".extraInput").val());
                sum = sum.toFixed(2);
                $(this).parent().parent().parent().parent().parent().find(".totalPriceSpan").html("$" + sum.toString());
                if($(this).parent().parent().find(".subTotal").html() != "$0.00") {
                    $(this).parent().parent().css("color", "black");
                }
                else {
                    $(this).parent().parent().css("color", "gray");
                }
            });
        });
        $(".priceInput").each(function() {
            $(this).bind('input propertychange', function() {
                var eaprice = parseFloat($(this).parent().parent().find(".numInput").val() == "" ? 0.00 : $(this).parent().parent().find(".numInput").val());
                var price = eaprice * parseFloat(this.value == "" ? 0.00 : this.value);
                price = price.toFixed(2);
                $(this).parent().parent().find(".subTotal").html("$" + price.toString());
                var sum = 0;
                $(this).parent().parent().parent().parent().find(".subTotal").each(function() {
                    sum += parseFloat($(this).html().split("$")[1]);
                });
                sum += parseFloat($(this).parent().parent().parent().parent().find(".extraInput").val() == "" ? 0.00 : $(this).parent().parent().parent().parent().find(".extraInput").val());
                sum = sum.toFixed(2);
                $(this).parent().parent().parent().parent().parent().find(".totalPriceSpan").html("$" + sum.toString());
                if($(this).parent().parent().find(".subTotal").html() != "$0.00") {
                    $(this).parent().parent().css("color", "black");
                }
                else {
                    $(this).parent().parent().css("color", "gray");
                }
            });
        });
        $(".extraInput").each(function() {
            $(this).bind('input propertychange', function() {
                var price = parseFloat(this.value == "" ? 0.00 : this.value);
                price = price.toFixed(2);
                $(this).parent().parent().find(".extraTotal").html("$" + price.toString());
                var sum = 0;
                $(this).parent().parent().parent().parent().find(".subTotal").each(function() {
                    sum += parseFloat($(this).html().split("$")[1]);
                });
                sum += parseFloat(this.value == "" ? 0.00 : this.value);
                sum = sum.toFixed(2);
                $(this).parent().parent().parent().parent().parent().find(".totalPriceSpan").html("$" + sum.toString());
                if($(this).parent().parent().find(".extraTotal").html() != "$0.00") {
                    $(this).parent().parent().css("color", "black");
                }
                else {
                    $(this).parent().parent().css("color", "gray");
                }
                if(this.value != "") {
                    $("#extraUpload").prop("required", true);
                }
                else {
                    $("#extraUpload").removeAttr("required");
                }
            });
        });
    });
    $("#noEstimate").click(function() {
        $('#estimateSubmit').html('Submit');
        $('#estimateSubmit').prop('disabled', false);
    });
    $("#estimateDia").on('hidden.bs.modal', function() {
        $('#estimateSubmit').html('Submit');
        $('#estimateSubmit').prop('disabled', false);
    })
    $("#yesEstimate").click(function(e) {
        e.preventDefault();
        var formData = new FormData();
        var author = $("#author").val();
        var showName = $("#showName").html();
        var arr = [];
        $(".subTotal").each(function() {
            /*var names = $(this).parent().parent().find(".numInput").attr("id").split("--");
            var name = names[0] + "-" + names[2];
            var num = $(this).parent().parent().find(".numInput").val();
            var unit = $(this).parent().parent().find(".units").html();
            var eaprice = parseFloat($(this).parent().parent().find("priceInput").val());
            eaprice = eaprice.toFixed(2);
            var eapriceStr = "$" + eaprice.toString();
            var price = $(this).html();
            var obj = {"name": name, "num": num, "unit": unit, "eachPrice": eapriceStr, "price": price};
            arr.push(obj);*/
            var category = $(this).parent().parent().find("td:eq(0)").html();
            var proNo = $(this).parent().parent().find("td:eq(1)").html();
            var proName = $(this).parent().parent().find("td:eq(2)").html();
            var unit = $(this).parent().parent().find("td:eq(3)").html();
            var price = $(this).parent().parent().find(".priceInput").val();
            var quantity = $(this).parent().parent().find(".numInput").val();
            var total = $(this).html();
            var obj = {"Category": category, "Product_No": proNo, "Product_name": proName, "Unit": unit, "Price": price, "Quantity": quantity, "Total": total};
            arr.push(obj);
        }); 
        formData.append("id", showName);
        var arr1 = JSON.stringify(arr);
        formData.append("each", arr1);
        if(extraFile != undefined) {
            for(var c of extraFile) {
                formData.append('extra', c);
            }
            formData.append("extraPrice", $(".extraInput").val());
        }
        else {
            formData.append('extra', undefined);
            formData.append("extraPrice", "");
        }
        formData.append("total", $(".totalPriceSpan").html());
        /*var price1 = {"each": arr, "total": $(".totalPriceSpan").html()};
        var price = JSON.stringify(price1);*/
        var user = $("#uNameShow").attr("data-name");
        //console.log(boothNum)
        //console.log(price);
        $.ajax({
            type: "post",
            url: "/vendor/estimate",
            dataType: "json",
            data: formData,
            contentType: false,
            processData: false,
            success: function(res) {
                //alert(res);
                var origin = window.location.hostname;
                var ws = new WebSocket('ws://' + origin + ':8080');
                var message = showName + "'s progress is updated! Refresh this page to check you progress!||" + user + "||" + author;
                ws.onopen = function(e) {
                    ws.send(message);
                }
                $("#estimateDiaFooter").hide();
                $("#estimateDiaBody").html('<div class="container"><p>Estimate Successfully!</p></br><span id="totalSecond">1</span><span id="second"> Second</span><span id="nextcontent"> later to go back to the job page!</span></div>');
                jQuery.getScript("/public/js/autourl.js").done(function(){
                    var fun = auto;
                    //fun("/exhibitor/show?id=" + res["id"]);
                    fun("/")
                });
            },
            error: function(err) {
                $("#estimateDiaFooter").hide();
                $("#estimateDiaBody").html('<div class="container"><p>Estimate failed!</p></br><span id="totalSecond">1</span><span id="second"> Second</span><span id="nextcontent"> later to go back homepage!</span></div>');
                jQuery.getScript("/public/js/autourl.js").done(function(){
                    var fun = auto;
                    //fun("/exhibitor/show?id=" + res["id"]);
                    fun("/")
                });
            }
        });
    });
</script>