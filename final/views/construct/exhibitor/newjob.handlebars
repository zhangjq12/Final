<div id="TabModify" class="container">
    <h4></h4>
    <form id="newTabs">
        <div class="card border-light mb-3">
            <div class="card-header">
                <h4>Show Info</h4>
            </div>
            <div class="card-body">
                <div class="container" id="author" data-name={{author}}></div>
                <div class="form-row">
                    <div class="col-md-4 mb-2">
                        <label for="boothId">Booth ID:</label>
                        <input id="boothId" type="text" class="form-control" name="boothId" value="{{boothId}}"></input>
                    </div>
                    <div class="col-md-4 mb-2">
                        <label for="showName">Show Name:</label>
                        <input id="showName" type="text" class="form-control" name="showName" value="{{showName}}"></input>
                    </div>
                    <div class="col-md-4 mb-2">
                        <label for="date">Date:</label>
                        <input id="date" type="text" class="form-control" name="date" value="{{date}}"></input>
                    </div>
                </div>
            </div>
        </div>
        <div class="card border-light mb-3">
            <div class="card-header">
                <h4>Booth Info</h4>
            </div>
            <div class="card-body">
                <div class="form-row">
                    <div class="col-md-4 mb-2">
                        <label for="size">Booth Size:</label>
                        <div class="form-inline">
                        <label for="size1" class="sr-only">Booth Size left:</label>
                        <input id="size1" type="text" class="form-control col-md-5" name="size1" placeholder="length"></input>
                        <span>&nbsp;&nbsp;âœ•&nbsp;&nbsp;</span>
                        <label for="size2" class="sr-only">Booth Size right:</label>
                        <input id="size2" type="text" class="form-control col-md-5" name="size2" placeholder="width"></input>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="card" style="width:100%">
                        <div class="card-body">
                            <h5 class="card-title">Categories</h5>
                            <div class="row">
                                <div class="form-check form-check-inline col-md-2">
                                    <input class="form-check-input" type="checkbox" id="Furniture" value="furniture">
                                    <label class="form-check-label" for="Furniture">Furniture</label>
                                </div>
                                <div class="form-check form-check-inline col-md-2">
                                    <input class="form-check-input" type="checkbox" id="Graphic" value="graphic">
                                    <label class="form-check-label" for="Graphic">Graphic</label>
                                </div>
                                <div class="form-check form-check-inline col-md-2">
                                    <input class="form-check-input" type="checkbox" id="Carpet" value="carpet">
                                    <label class="form-check-label" for="Carpet">Carpet</label>
                                </div>
                                <div class="form-check form-check-inline col-md-3">
                                    <input class="form-check-input" type="checkbox" id="HangingSign" value="hangingSign">
                                    <label class="form-check-label" for="HangingSign">Hanging Sign</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-check form-check-inline col-md-2">
                                    <input class="form-check-input" type="checkbox" id="Lighting" value="lighting">
                                    <label class="form-check-label" for="Lighting">Lighting</label>
                                </div>
                                <div class="form-check form-check-inline col-md-2">
                                    <input class="form-check-input" type="checkbox" id="AV" value="av">
                                    <label class="form-check-label" for="AV">AV</label>
                                </div>
                                <div class="form-check form-check-inline col-md-2">
                                    <input class="form-check-input" type="checkbox" id="Electric" value="electric">
                                    <label class="form-check-label" for="Electric">Electric</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card border-light mb-3">
            <div class="card-header">
                <h4>Details</h4>
            </div>
            <div class="card-body">
            <div class="form-row">
            <div class="col-md-12 mb-2">
            <label for="details">Details: </label>
            <!--<div class="btn-toolbar mb-2" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="Bold and Italic">
                    <button id="boldText" type="button" class="btn btn-light"><span style="font-weight: bold;">B</span></button>
                    <button id="italicText" type="button" class="btn btn-light"><span style="font-style:italic;">I</span></button>
                </div>
                <div class="btn-group mr-2" role="group" aria-label="Second group">
                    <div class="btn-group" role="group">
                        <button id="colorsGroup" type="button" class="btn btn-light dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Black
                        </button>
                        <div class="dropdown-menu" aria-labelledby="colorsGroup">
                            <a class="dropdown-item" href="javascript:void(0);">Black</a>
                            <a class="dropdown-item" href="javascript:void(0);" style="color: red;">Red</a>
                            <a class="dropdown-item" href="javascript:void(0);" style="color: green;">Green</a>
                            <a class="dropdown-item" href="javascript:void(0);" style="color: orange;">Orange</a>
                            <a class="dropdown-item" href="javascript:void(0);" style="color: gray;">Gray</a>
                            <a class="dropdown-item" href="javascript:void(0);" style="color: blue;">Blue</a>
                        </div>
                    </div>
                    <div class="btn-group" role="group">
                        <button id="sizeGroup" type="button" class="btn btn-light dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        12
                        </button>
                        <div class="dropdown-menu" aria-labelledby="sizeGroup">
                            <a class="dropdown-item" href="javascript:void(0);">9</a>
                            <a class="dropdown-item" href="javascript:void(0);">10</a>
                            <a class="dropdown-item" href="javascript:void(0);">11</a>
                            <a class="dropdown-item" href="javascript:void(0);">12</a>
                            <a class="dropdown-item" href="javascript:void(0);">14</a>
                            <a class="dropdown-item" href="javascript:void(0);">15</a>
                            <a class="dropdown-item" href="javascript:void(0);">16</a>
                            <a class="dropdown-item" href="javascript:void(0);">18</a>
                            <a class="dropdown-item" href="javascript:void(0);">20</a>
                            <a class="dropdown-item" href="javascript:void(0);">22</a>
                            <a class="dropdown-item" href="javascript:void(0);">24</a>
                            <a class="dropdown-item" href="javascript:void(0);">28</a>
                            <a class="dropdown-item" href="javascript:void(0);">32</a>
                            <a class="dropdown-item" href="javascript:void(0);">36</a>
                        </div>
                    </div>
                </div>
                <div class="btn-group" role="group" aria-label="Third group">
                    <button type="button" class="btn btn-light">Add Images</button>
                </div>
            </div>-->
            <textarea id="details" name="details" rows="10" cols="80" class="form-control" placeholder="Tap your tab here!">{{details}}</textarea>
            </div>
            </div>
        </div>
        <button id="tabSubmit" type="submit" data-toggle="modal" data-target="#modifytabDia" class="btn btn-primary" disabled="true">Submit</button>
        </div>
    </form>
</div>

<div class="modal fade" id="modifytabDia" tabindex="-1" role="dialog" aria-labelledby="modifytabDiaTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header" id="modifytabDiaHeader">
                <h5 class="modal-title" id="modifytabDiaTitle">Modify Tab</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="modifytabDiaBody">
                Do you want to continue?
            </div>
            <div class="modal-footer" id="modifytabDiaFooter">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" id="nomodify" >No</button>
                <button type="button" class="btn btn-primary" id="yesmodify" >Yes</button>
            </div>
        </div>
    </div>
</div> 

<script src="/public/js/filesizelimit.js"></script>
<script>
    var nameEmpty = false;
    var songEmpty = false;
    var artistEmpty = false;
    var contentEmpty = false;

    $('#newTabs').submit(function(){
        window.event.preventDefault();
        $(this).find(':button[type=submit]').html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Submitting...');
        $(this).find(':button[type=submit]').prop('disabled', true);
    });
    bootstrapValidate('#showName', 'required: This can not be empty!', function(isEmpty) {
        if(isEmpty == true) {
            nameEmpty = true; 
            if(nameEmpty && contentEmpty)
                $("#tabSubmit").attr('disabled', false);
            else
                $("#tabSubmit").attr('disabled', true);
        } 
        else 
        if(isEmpty == 0) {
            nameEmpty = false;
            $("#tabSubmit").attr('disabled', true);
        }
    });
    /*bootstrapValidate('#songName', 'required: This can not be empty!', function(isEmpty) {
        if(isEmpty == true) {
            songEmpty = true; 
            if(nameEmpty && songEmpty && artistEmpty && contentEmpty)
                $("#tabSubmit").attr('disabled', false);
            else
                $("#tabSubmit").attr('disabled', true);
        } 
        else 
        if(isEmpty == 0) {
            songEmpty = false;
            $("#tabSubmit").attr('disabled', true);
        }
    });
    bootstrapValidate('#artistName', 'required: This can not be empty!', function(isEmpty) {
        if(isEmpty == true) {
            artistEmpty = true; 
            if(nameEmpty && songEmpty && artistEmpty && contentEmpty)
                $("#tabSubmit").attr('disabled', false);
            else
                $("#tabSubmit").attr('disabled', true);
        } 
        else 
        if(isEmpty == 0) {
            artistEmpty = false;
            $("#tabSubmit").attr('disabled', true);
        }
    });*/
    bootstrapValidate('#details', 'required: This can not be empty!', function(isEmpty) {
        if(isEmpty == true) {
            contentEmpty = true; 
            if(nameEmpty && contentEmpty)
                $("#tabSubmit").attr('disabled', false);
            else
                $("#tabSubmit").attr('disabled', true);
        } 
        else 
        if(isEmpty == 0) {
            contentEmpty = false;
            $("#tabSubmit").attr('disabled', true);
        }
    });
    $(document).ready(function(){
        //if(op == "upload") {
            nameEmpty = false;
            contentEmpty = false;
        /*}
        else {
            nameEmpty = true;
            contentEmpty = true;
            $("#tabSubmit").attr('disabled', false);
        }*/
    });
    $("#nomodify").click(function() {
        $('#tabSubmit').html('Submit');
        $('#tabSubmit').prop('disabled', false);
    });
    $("#yesmodify").click(function(e) {
        e.preventDefault();
        $("#yesmodify").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Submitting...');
        $('#yesmodify').prop('disabled', true);
        //var formData = new FormData();
        var category = [];
        var size = [];

        if($("#Furniture").is(":checked")) {
            category.push("Furniture");
        }
        if($("#Graphic").is(":checked")) {
            category.push("Graphic");
        }
        if($("#Carpet").is(":checked")) {
            category.push("Carpet");
        }
        if($("#HangingSign").is(":checked")) {
            category.push("Hanging Sign");
        }
        if($("#Lighting").is(":checked")) {
            category.push("Lighting");
        }
        if($("#AV").is(":checked")) {
            category.push("AV");
        }
        if($("#Electric").is(":checked")) {
            category.push("Electric");
        }
        size.push($("#size1").val());
        size.push($("#size2").val());

        /*formData.append('showName', $("#showName").val());
        formData.append('boothId', $("#boothId").val());
        formData.append('date', $("#date").val());
        formData.append('author', $("#author").attr('data-name'));
        formData.append('category', category);
        formData.append('details', $("#details").val());
        formData.append('size', size);*/
        const formData = {
            boothId: $("#boothId").val(),
            showName: $("#showName").val(),
            date: $("#date").val(),
            author: $("#author").attr('data-name'),
            size: size,
            category: category,
            details: $("#details").val()
        }
        console.log(formData);

        $.ajax({
            type: "post",
            url: "/exhibitor/newjob/",
            dataType: "json",
            data: formData,
            success: function(res) {
                //if(id == "") {
                if(res["success"] == "success") {
                    $("#modifytabDiaFooter").hide();
                    $("#modifytabDiaBody").html('<div class="container"><p>Create This Job Successfully!</p></br><span id="totalSecond">3</span><span id="second"> Seconds</span><span id="nextcontent"> later to go back to the job page!</span></div>');
                    jQuery.getScript("/public/js/autourl.js").done(function(){
                        var fun = auto;
                        //fun("/exhibitor/show?id=" + res["id"]);
                        fun("/")
                    });
                }
                else {
                    $("#modifytabDiaFooter").hide();
                    $("#modifytabDiaBody").html('<div class="container"><p>Job exists! Create failed!</p></br><span id="totalSecond">3</span><span id="second"> Seconds</span><span id="nextcontent"> later to go back to the job page!</span></div>');
                    jQuery.getScript("/public/js/autourl.js").done(function(){
                        var fun = auto;
                        //fun("/exhibitor/show?id=" + res["id"]);
                        fun("/")
                    });
                }
                /*}
                else {
                    $("#modifytabDiaFooter").hide();
                    $("#modifytabDiaBody").html('<div class="container"><p>Modify This Job Successfully!</p></br><span id="totalSecond">5</span><span id="second"> Seconds</span><span id="nextcontent"> later to go back to the job page!</span></div>');
                    jQuery.getScript("/public/js/autourl.js").done(function(){
                        var fun = auto;
                        fun("/exhibitor/show?id=" + res["id"]);
                    });
                }*/
            },
            error: function(err) {
                /*if(err["id"] != null) {
                    $("#modifytabDiaFooter").hide();
                    $("#modifytabDiaBody").html('<div class="container"><p>Modify job failed!</p></br><span id="totalSecond">5</span><span id="second"> Seconds</span><span id="nextcontent"> later to go back to the job page!</span></div>');
                    jQuery.getScript("/public/js/autourl.js").done(function(){
                        var fun = auto;
                        fun("/exhibitor/show?id=" + err["id"]);
                    });
                }
                else {*/
                    $("#modifytabDiaFooter").hide();
                    $("#modifytabDiaBody").html('<div class="container"><p>Create job failed!</p></br><span id="totalSecond">5</span><span id="second"> Seconds</span><span id="nextcontent"> later to go back homepage!</span></div>');
                    jQuery.getScript("/public/js/autourl.js").done(function(){
                        var fun = auto;
                        fun("/");
                    });
                //}
            }
        });
    });
</script>